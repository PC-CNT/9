<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
{{- $title := (print .Title " | " .Site.Title) -}}
{{- if eq .Site.Title .Title }}
{{- $title = .Site.Title -}}
{{ end -}}
<title>{{ $title }}</title>
<meta property="og:title" content="{{ $title }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:locale" content="{{ .Site.LanguageCode }}">

{{- with .Scratch.Get "DESCRIPTION" }}
<meta name="description" content="{{ . }}">
<meta property="og:description" content="{{ . }}">
{{ end -}}


{{- if .IsHome -}}
<meta property="og:type" content="website">
{{ else }}
<meta property="og:type" content="{{ default `article` }}">
<meta property="article:section" content="{{ .Section }}">
{{- end -}}

{{- $thumb := $.Params.image -}}
<meta name="thumbnail" content="{{ $thumb }}">



{{- with .Page.Resources.Get .Params.image -}}
<meta property="og:image" content="{{ (.Resources.Get .Params.image).Permalink }}">
{{ else with .Scratch.Get "FAVICON" }}
<meta property="og:image" content="{{ . }}">
{{- end }}


{{- $images := partial "_funcs/get-page-images" . }}
{{- with index $images 0 }}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="{{ .Permalink }}">
{{- else }}
<meta name="twitter:card" content="summary">
{{- end }}


<meta name="twitter:title" content="{{ $title }}">

{{- with .Scratch.Get "DESCRIPTION" -}}
<meta name="twitter:description" content="{{ . }}">
{{- end -}}

{{- $twitterSite := "" }}
{{- with site.Params.social }}
{{- if reflect.IsMap . }}
{{- with .twitter }}
{{- $content := . }}
{{- if not (strings.HasPrefix . "@") }}
{{- $content = printf "@%v" . }}
{{- end }}
<meta name="twitter:site" content="{{ $content }}">
{{- end }}
{{- end }}
{{- end }}


{{- if (or .Site.Params.noindex .Params.noindex ) }}
<meta name="robots" content="none" />
{{ end -}}

{{ if (or .Site.Params.nocomment .Params.nocomment) }}
<meta name="Hatena::Bookmark" content="nocomment" />
{{ end }}

{{ range .AlternativeOutputFormats -}}
<link rel="{{ .Rel }}" type="{{ .MediaType.Type | html }}" href="{{ .Permalink | safeURL }}">
{{ end -}}


{{- with .Scratch.Get "FAVICON" -}}
{{ if eq ( path.Ext .) ".svg" }}
<link rel="icon" type="image/svg+xml" href="{{ . }}">
{{ else if ne ( path.Ext . ) ".ico" }}
<link rel="icon" type="image/{{ replace ( path.Ext . ) `.` `` }}" href="{{ . }}">
{{ else }}
<link rel="icon" type="image/x-icon" href="{{ . }}">
{{ end }}
{{- end -}}
